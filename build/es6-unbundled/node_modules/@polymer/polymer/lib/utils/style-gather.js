import{resolveCss}from"./resolve-url.js";const MODULE_STYLE_LINK_SELECTOR="link[rel=import][type~=css]",INCLUDE_ATTR="include",SHADY_UNSCOPED_ATTR="shady-unscoped";function importModule(a){const b=customElements.get("dom-module");return b?b.import(a):null}function styleForImport(a){let b=a.body?a.body:a;const c=resolveCss(b.textContent,a.baseURI),d=document.createElement("style");return d.textContent=c,d}let templateWithAssetPath;export function stylesFromModules(a){const b=a.trim().split(/\s+/),c=[];for(let d=0;d<b.length;d++)c.push(...stylesFromModule(b[d]));return c}export function stylesFromModule(a){const b=importModule(a);if(!b)return console.warn("Could not find style data in module named",a),[];if(void 0===b._styles){const a=[..._stylesFromModuleImports(b)],c=b.querySelector("template");c&&a.push(...stylesFromTemplate(c,b.assetpath)),b._styles=a}return b._styles}export function stylesFromTemplate(a,b){if(!a._styles){const c=[],d=a.content.querySelectorAll("style");for(let a=0;a<d.length;a++){let f=d[a],e=f.getAttribute(INCLUDE_ATTR);e&&c.push(...stylesFromModules(e).filter(function(a,b,c){return c.indexOf(a)===b})),b&&(f.textContent=resolveCss(f.textContent,b)),c.push(f)}a._styles=c}return a._styles}export function stylesFromModuleImports(a){let b=importModule(a);return b?_stylesFromModuleImports(b):[]}export function _stylesFromModuleImports(a){const b=[],c=a.querySelectorAll("link[rel=import][type~=css]");for(let d,e=0;e<c.length;e++)if(d=c[e],d.import){const a=d.import,c=d.hasAttribute(SHADY_UNSCOPED_ATTR);if(c&&!a._unscopedStyle){const b=styleForImport(a);b.setAttribute(SHADY_UNSCOPED_ATTR,""),a._unscopedStyle=b}else a._style||(a._style=styleForImport(a));b.push(c?a._unscopedStyle:a._style)}return b}export function cssFromModules(a){let b=a.trim().split(/\s+/),c="";for(let d=0;d<b.length;d++)c+=cssFromModule(b[d]);return c}export function cssFromModule(a){let b=importModule(a);if(b&&void 0===b._cssText){let a=_cssFromModuleImports(b),c=b.querySelector("template");c&&(a+=cssFromTemplate(c,b.assetpath)),b._cssText=a||null}return b||console.warn("Could not find style data in module named",a),b&&b._cssText||""}export function cssFromTemplate(a,b){let c="";const d=stylesFromTemplate(a,b);for(let f,e=0;e<d.length;e++)f=d[e],f.parentNode&&f.parentNode.removeChild(f),c+=f.textContent;return c}export function cssFromModuleImports(a){let b=importModule(a);return b?_cssFromModuleImports(b):""}export function _cssFromModuleImports(a){let b="",c=_stylesFromModuleImports(a);for(let d=0;d<c.length;d++)b+=c[d].textContent;return b}