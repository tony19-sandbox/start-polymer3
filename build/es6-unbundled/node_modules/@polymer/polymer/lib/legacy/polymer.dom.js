import"../utils/boot.js";import"../utils/settings.js";import{FlattenedNodesObserver}from"../utils/flattened-nodes-observer.js";import{flush as flush$0,enqueueDebouncer}from"../utils/flush.js";const p=Element.prototype,normalizedMatchesSelector=p.matches||p.matchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector,matchesSelector=function(a,b){return normalizedMatchesSelector.call(a,b)};class DomApi{constructor(a){this.node=a}observeNodes(a){return new FlattenedNodesObserver(this.node,a)}unobserveNodes(a){a.disconnect()}notifyObserver(){}deepContains(a){if(this.node.contains(a))return!0;let b=a,c=a.ownerDocument;for(;b&&b!==c&&b!==this.node;)b=b.parentNode||b.host;return b===this.node}getOwnerRoot(){return this.node.getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?this.node.assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let a=[],b=this.node.assignedSlot;for(;b;)a.push(b),b=b.assignedSlot;return a}importNode(a,b){let c=this.node instanceof Document?this.node:this.node.ownerDocument;return c.importNode(a,b)}getEffectiveChildNodes(){return FlattenedNodesObserver.getFlattenedNodes(this.node)}queryDistributedElements(a){let b=this.getEffectiveChildNodes(),d=[];for(let e,c=0,f=b.length;c<f&&(e=b[c]);c++)e.nodeType===Node.ELEMENT_NODE&&matchesSelector(e,a)&&d.push(e);return d}get activeElement(){let a=this.node;return a._activeElement===void 0?a.activeElement:a._activeElement}}function forwardMethods(a,b){for(let c,d=0;d<b.length;d++)c=b[d],a[c]=function(){return this.node[c].apply(this.node,arguments)}}function forwardReadOnlyProperties(a,b){for(let c,d=0;d<b.length;d++)c=b[d],Object.defineProperty(a,c,{get:function(){const a=this;return a.node[c]},configurable:!0})}function forwardProperties(a,b){for(let c,d=0;d<b.length;d++)c=b[d],Object.defineProperty(a,c,{get:function(){const a=this;return a.node[c]},set:function(a){this.node[c]=a},configurable:!0})}forwardMethods(DomApi.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),forwardReadOnlyProperties(DomApi.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),forwardProperties(DomApi.prototype,["textContent","innerHTML"]);class EventApi{constructor(a){this.event=a}get rootTarget(){return this.event.composedPath()[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}export{DomApi};DomApi.prototype.cloneNode,DomApi.prototype.appendChild,DomApi.prototype.insertBefore,DomApi.prototype.removeChild,DomApi.prototype.replaceChild,DomApi.prototype.setAttribute,DomApi.prototype.removeAttribute,DomApi.prototype.querySelector,DomApi.prototype.querySelectorAll;export const dom=function(a){if(a=a||document,!a.__domApi){let b;b=a instanceof Event?new EventApi(a):new DomApi(a),a.__domApi=b}return a.__domApi};export{matchesSelector};export{flush$0 as flush};export{enqueueDebouncer as addDebouncer};