import"../../../../@webcomponents/shadycss/entrypoints/apply-shim.js";import{ElementMixin}from"../mixins/element-mixin.js";import{GestureEventListeners}from"../mixins/gesture-event-listeners.js";import{DirMixin}from"../mixins/dir-mixin.js";import{dedupingMixin}from"../utils/mixin.js";import{importHref as importHref$0}from"../utils/import-href.js";import"../utils/render-status.js";import"../utils/unresolved.js";import{dom as dom$0,matchesSelector}from"./polymer.dom.js";import{setTouchAction}from"../utils/gestures.js";import{Debouncer}from"../utils/debounce.js";import{timeOut,microTask}from"../utils/async.js";import{get as get$0}from"../utils/path.js";let styleInterface=window.ShadyCSS;export const LegacyElementMixin=dedupingMixin(a=>{const b=DirMixin(GestureEventListeners(ElementMixin(a))),c={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class d extends b{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this._applyListeners()}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(a,b,c){b!==c&&(super.attributeChangedCallback(a,b,c),this.attributeChanged(a,b,c))}attributeChanged(){}_initializeProperties(){let a=Object.getPrototypeOf(this);a.hasOwnProperty("__hasRegisterFinished")||(a.__hasRegisterFinished=!0,this._registered()),super._initializeProperties(),this.root=this,this.created()}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,b){return this._deserializeValue(a,b)}reflectPropertyToAttribute(a,b,c){this._propertyToAttribute(a,b,c)}serializeValueToAttribute(a,b,c){this._valueToNodeAttribute(c||this,a,b)}extend(a,b){if(!(a&&b))return a||b;let c=Object.getOwnPropertyNames(b);for(let d,e,f=0;f<c.length&&(d=c[f]);f++)e=Object.getOwnPropertyDescriptor(b,d),e&&Object.defineProperty(a,d,e);return a}mixin(a,b){for(let c in b)a[c]=b[c];return a}chainObject(a,b){return a&&b&&a!==b&&(a.__proto__=b),a}instanceTemplate(a){let b=this.constructor._contentForTemplate(a),c=document.importNode(b,!0);return c}fire(a,b,c){c=c||{},b=null===b||void 0===b?{}:b;let d=new Event(a,{bubbles:void 0===c.bubbles||c.bubbles,cancelable:!!c.cancelable,composed:void 0===c.composed||c.composed});d.detail=b;let e=c.node||this;return e.dispatchEvent(d),d}listen(a,b,c){a=a||this;let d=this.__boundListeners||(this.__boundListeners=new WeakMap),e=d.get(a);e||(e={},d.set(a,e));let f=b+c;e[f]||(e[f]=this._addMethodEventListenerToNode(a,b,c,this))}unlisten(a,b,c){a=a||this;let d=this.__boundListeners&&this.__boundListeners.get(a),e=b+c,f=d&&d[e];f&&(this._removeEventListenerFromNode(a,b,f),d[e]=null)}setScrollDirection(a,b){setTouchAction(b||this,c[a]||"auto")}$$(a){return this.root.querySelector(a)}get domHost(){let a=this.getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){window.ShadyDOM&&this.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){const a=this,b=dom$0(a);return b.getEffectiveChildNodes()}queryDistributedElements(a){const b=this,c=dom$0(b);return c.queryDistributedElements(a)}getEffectiveChildren(){let a=this.getEffectiveChildNodes();return a.filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),b=[];for(let d,c=0;d=a[c];c++)d.nodeType!==Node.COMMENT_NODE&&b.push(d.textContent);return b.join("")}queryEffectiveChildren(a){let b=this.queryDistributedElements(a);return b&&b[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let b=this.root.querySelector(a||"slot");return b?dom$0(b).getDistributedNodes():[]}getContentChildren(a){let b=this.getContentChildNodes(a).filter(function(a){return a.nodeType===Node.ELEMENT_NODE});return b}isLightDescendant(a){const b=this;return b!==a&&b.contains(a)&&b.getRootNode()===a.getRootNode()}isLocalDescendant(a){return this.root===a.getRootNode()}scopeSubtree(){}getComputedStyleValue(a){return styleInterface.getComputedStyleValue(this,a)}debounce(a,b,c){return this._debouncers=this._debouncers||{},this._debouncers[a]=Debouncer.debounce(this._debouncers[a],0<c?timeOut.after(c):microTask,b.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];return!!(b&&b.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.cancel()}async(a,b){return 0<b?timeOut.run(a.bind(this),b):~microTask.run(a.bind(this))}cancelAsync(a){0>a?microTask.cancel(~a):timeOut.cancel(a)}create(a,b){let c=document.createElement(a);if(b)if(c.setProperties)c.setProperties(b);else for(let a in b)c[a]=b[a];return c}importHref(a,b,c,d){let e=b?b.bind(this):null,f=c?c.bind(this):null;return importHref$0(a,e,f,d)}elementMatches(a,b){return matchesSelector(b||this,a)}toggleAttribute(a,b,c){c=c||this,1==arguments.length&&(b=!c.hasAttribute(a)),b?c.setAttribute(a,""):c.removeAttribute(a)}toggleClass(a,b,c){c=c||this,1==arguments.length&&(b=!c.classList.contains(a)),b?c.classList.add(a):c.classList.remove(a)}transform(a,b){b=b||this,b.style.webkitTransform=a,b.style.transform=a}translate3d(a,b,c,d){d=d||this,this.transform("translate3d("+a+","+b+","+c+")",d)}arrayDelete(a,b){let c;if(!Array.isArray(a)){let d=get$0(this,a);if(c=d.indexOf(b),0<=c)return this.splice(a,c,1)}else if(c=a.indexOf(b),0<=c)return a.splice(c,1);return null}_logger(a,b){Array.isArray(b)&&1===b.length&&Array.isArray(b[0])&&(b=b[0]),"log"===a||"warn"===a||"error"===a?console[a](...b):void 0}_log(...a){this._logger("log",a)}_warn(...a){this._logger("warn",a)}_error(...a){this._logger("error",a)}_logf(a,...b){return["[%s::%s]",this.is,a,...b]}}return d.prototype.is="",d});